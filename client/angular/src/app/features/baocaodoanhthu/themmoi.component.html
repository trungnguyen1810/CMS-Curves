<style>
    .required {
        color: red;
    }

    ::ng-deep .my-class .modal-dialog {
     max-width: 70%;
     width: 70%;
}
</style>
<div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">{{data.title}}</h4>
    <span aria-hidden="true" ngbAutofocus style="cursor: pointer" (click)="activeModal.dismiss()">X</span>

</div>
<div class="modal-body">
    <form>
        <div class="col-md-12 row">
            <div class="col-md-12">
              <div class="form-group row">
                <p-radioButton name="groupname" class="col-sm-6" [value]="hoivien" label="Hội viên" (onClick)="makeHoiVien()"></p-radioButton>
                <p-radioButton name="groupname" class="col-sm-6" [value]="banle" label="Bán lẻ" (onClick)="makeBanLe()"></p-radioButton>
               </div>


              <div *ngIf="hoivien">
                <div class="form-group row">
                  <div class="col-md-12">
                    <div class="form-group row">
                  <label class="col-sm-6 col-form-label text-label"> Thông tin hội viên <span
                          class="required">(*)</span></label>
                  <div class="col-sm-6" >
                    <p-dropdown [options]="khachhangs" [(ngModel)]="selectedKhachHang" (onChange)="bindThongTin($event)" name="khachhangs" optionLabel="HoVaTen" [filter]="true"
                    [style]="{'width':'192px'}" >
               </p-dropdown>
                  </div>
                </div>
              </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                        <div class="col-md-4"> <label>Tên khách hàng</label> <span style="font-size:13px;"></span></div>
                          <div class="col-md-6">
                            <input type="text" class="p-inputtext-md" disabled = "true"  pInputText maxlength="200" [(ngModel)]="TenKhachHang"
                            name="TenKhachHang">
                          </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-md-4 col-form-label text-label">Số điện thoại</label>
                      <div class="col-sm-6" style="margin-top: 7px;">
                        <input type="text" class="p-inputtext-md" disabled = "true" pInputText maxlength="200" [(ngModel)]="SoDienThoai"
                        name="SoDienThoai">
                      </div>
                  </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                        <div class="col-md-4"> <label>Email </label> <span style="font-size:13px;"></span></div>
                          <div class="col-md-6">
                            <input type="text" class="p-inputtext-md" disabled = "true" pInputText maxlength="200" [(ngModel)]="Email"
                            name="TenKhuyenMai">
                          </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-md-4 col-form-label text-label">Địa chỉ</label>
                      <div class="col-sm-6" style="margin-top: 7px;">
                        <input type="text" class="p-inputtext-md" disabled = "true" pInputText maxlength="200" [(ngModel)]="DiaChi"
                        name="DiaChi">
                      </div>
                  </div>
                  </div>
              </div>

               </div>

              <div *ngIf="banle">
                <div class="form-group row">
                  <div class="col-md-12">
                    <div class="form-group row">
                  <label class="col-sm-12 col-form-label text-label"> Thông tin bán lẻ </label>
                    </div>
                    </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                        <div class="col-md-4"> <label>Tên khách hàng<span
                            style = "color: red;">(*)</span> </label> <span style="font-size:13px;"></span></div>
                          <div class="col-md-6">
                            <input type="text" class="p-inputtext-md"  pInputText maxlength="200" [(ngModel)]="TenKhachHang"
                            name="TenKhachHang">
                          </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-md-4 col-form-label text-label">Số điện thoại<span
                        style = "color: red;">(*)</span></label>
                      <div class="col-sm-6" style="margin-top: 7px;">
                        <input type="text" class="p-inputtext-md" pInputText maxlength="200" [(ngModel)]="SoDienThoai"
                        name="SoDienThoai">
                      </div>
                  </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                        <div class="col-md-4"> <label>Email<span
                            style = "color: red;">(*)</span> </label> <span style="font-size:13px;"></span></div>
                          <div class="col-md-6">
                            <input type="text" class="p-inputtext-md"  pInputText maxlength="200" [(ngModel)]="Email"
                            name="TenKhuyenMai">
                          </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group row">
                      <label class="col-md-4 col-form-label text-label">Địa chỉ</label>
                      <div class="col-sm-6" style="margin-top: 7px;">
                        <input type="text" class="p-inputtext-md"  pInputText maxlength="200" [(ngModel)]="DiaChi"
                        name="DiaChi">
                      </div>
                  </div>
                  </div>
              </div>
               </div>
               <hr>
               <div class="form-group row">
                 <label class="col-sm-12 col-form-label text-label">Thuê tủ đồ:</label>
                   <label class="col-sm-6 col-form-label text-label">Ngày bắt đầu</label>
                   <label class="col-sm-6 col-form-label text-label">Ngày kết thúc</label>
                 <div class="col-sm-6" >
                   <p-calendar [(ngModel)]="NgayBatDau" name='ngaybatdau' dateFormat="dd-mm-yy" (onSelect)="onChangeNgayThue()"  [showIcon]="true" inputId="icon1"></p-calendar>
                 </div>
                 <div class="col-sm-6" >
                   <p-calendar [(ngModel)]="NgayKetThuc" name='ngayketthuc' dateFormat="dd-mm-yy"  (onSelect)="onChangeNgayThue()" [showIcon]="true" inputId="icon2"></p-calendar>
                 </div>
                 <!-- <label class="col-sm-6 col-form-label text-label">Tiền thuê tủ đồ: {{TongTienTuDo}}</label> -->
             </div>
             <hr>
             <div class="form-group row">
               <label class="col-sm-12 col-form-label text-label">Mua đồ, dụng cụ:</label>

                <div class="col-md-4"> <label>Danh sách sản phẩm</label> <span style="font-size:13px;"> (click vào + để
                    thêm vào lưới) </span></div>
                  <div class="col-md-8">
                    <p-dropdown [options]="danhsachsanphams" [(ngModel)]="selectedSanPham" name="danhsachsanpham" optionLabel="TenSanPham"
                    [style]="{'width':'195px'}" [filter]="true">
                </p-dropdown>
                    <button pButton type="button" (click)="ThemSanPham();" class="p-button-raised p-button-rounded"
                icon="pi pi-plus" style="margin-left: 20px;"></button>
                  </div>

                  <table class="table table-hover table-bordered">
                    <thead>
                        <tr>
                            <th scope="col" style="width: 7%;">STT</th>
                            <th scope="col" style="width: 19%;">Tên sản phẩm</th>
                            <th scope="col">Giá sản phẩm</th>
                            <th scope="col">Số lượng</th>
                            <th scope="col">Đơn giá</th>
                            <!-- <th scope="col">Hoạt động</th> -->
                            <th scope="col" style="width: 20%;" *ngIf= "showGhiChu">Ghi chú</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let item of sanphams; let index = index" class="khuyenmaitr">
                            <th scope="row" style="vertical-align: middle;"> {{index+1}}</th>
                            <td style="vertical-align: middle;">{{item.TenSanPham}}</td>
                            <td style="vertical-align: middle;">{{item.Gia}}</td>
                            <td><input type="text" style="text-align:right;width: 100%;" name="name{{index}}"  [(ngModel)]="SoLuong[index].value" (keypress)=onPressSoLuong($event)  (keyup)="ChangeSoLuong(index)"> </td>
                            <td>{{item.Tong}}</td>
                            <!-- <td><input type="checkbox" [(ngModel)]="TinhTrang[index]" (change)="CheckTinhTrang($event);" [checked]="isChecked[index] == true" name={{index}}></td> -->
                            <td *ngIf= "showGhiChu" style="vertical-align: middle;"><span style="color:red" >{{item.GhiChu}}</span></td>
                            <td style="vertical-align: middle;"><button type="button" (click)="XoaSanPham(index);"  class="btn btn-sm btn-primary active xoamonan"> Xóa</button></td>
                        </tr>
                        <tr >
                          <th scope="row">Tổng tiền</th>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td></td>
                          <td>{{TongTienDungCu}} đ</td>
                      </tr>
                    </tbody>
                </table>

           </div>
            </div>
        </div>
    </form>
</div>
<div class="modal-footer">
    <button pButton type="button" (click)="Xem();" label="Ghi lại" class="p-button-raised p-button-rounded"
        icon="pi pi-plus"></button>
    <button pButton class="p-button-raised p-button-rounded" label="Hủy bỏ" (click)="activeModal.close()"></button>
</div>
